/**
 * $.Collection
 * 
 * autor: kobezzza (kobezzza@gmail.com | http://kobezzza.com)
 * version: 4.0
 * date: 25.10.2011 16:03:41
 */
 (function(g){g.Collection=function(a,b){a=a||null;b=b||null;if(this.fn&&(!this.fn.name||this.fn.name!=="$.Collection"))return new g.Collection(a,b);g.extend(true,this,g.Collection.storage);var c=this.dObj.prop;b&&g.extend(true,c,b);if(g.isString(a)){c.target=g(a);c.collection=null}else c.collection=a};g.Collection.fn=g.Collection.prototype={name:"$.Collection",version:"4.0",collection:function(){return this.name+" "+this.version},config:{constants:{active:"active",contextSeparator:"~",subcontextSeparator:"#",
methodSeparator:"::"},flags:{use:{ac:true}}},stack:["collection","filter","context","cache","index","map","variable","defer","page","parser","appendType","target","calculator","pager","template","templateModel","numberBreak","pageBreak","resultNull"],getActiveContext:function(){return this.config.flags.use.ac===true?this.dObj.prop.context.toString():""},callee:function(a){return this.dObj.sys.callee[a||"filter"]}};g.Collection.stat={};g.Collection.stat.templateModels={};g.Collection.stat.obj={constants:g.Collection.fn.config.constants,
getByLink:function(a,b){b=b.toString().split(this.constants.contextSeparator);for(var c,d=0,e,f=0,h=b.length;d<h;d++){b[d]=g.trim(b[d]);if(b[d]&&b[d]!==this.constants.subcontextSeparator)if(b[d].search(this.constants.subcontextSeparator)===-1)a=a[b[d]];else{e=+b[d].replace(this.constants.subcontextSeparator,"");if(g.isArray(a))a=e>=0?a[e]:a[a.length+e];else{if(e<0){f=0;for(c in a)a.hasOwnProperty(c)&&f++;e+=f}f=0;for(c in a)if(a.hasOwnProperty(c)){if(e===f){a=a[c];break}f++}}}}return a},setByLink:function(a,
b,c){b=b.toString().split(this.constants.contextSeparator);var d,e=0,f,h=0,j=b.length;for(e=j;e--;){b[e]=g.trim(b[e]);if(b[e]===""||b[e]===this.constants.subcontextSeparator)b.splice(e,1)}j=b.length-1;for(e=0;e<=j;e++)if(b[e].search(this.constants.subcontextSeparator)===-1)if(e===j)a[b[e]]=c;else a=a[b[e]];else{f=+b[e].replace(this.constants.subcontextSeparator,"");if(g.isArray(a))if(e===j)if(f>=0)a[f]=c;else a[a.length+f]=c;else a=f>=0?a[f]:a[a.length+f];else{if(f<0){h=0;for(d in a)a.hasOwnProperty(d)&&
h++;f+=h}h=0;for(d in a)if(a.hasOwnProperty(d)){if(f===h){if(e===j)a[d]=c;else a=a[d];break}h++}}}return true},addElementToObject:function(a,b,c){b=b.split(this.constants.methodSeparator);var d,e={};if(b[1]&&b[1]=="unshift"){e[b[0]]=c;for(d in a)if(a.hasOwnProperty(d))e[d]=a[d];return e}else if(!b[1]||b[1]=="push")a[b[0]]=c;return true}};g.Collection.stat.sort={field:null,rev:false,shuffle:false,fn:null,sortBy:function(a,b,c){this.field=a||null;this.rev=b?b!=="shuffle"?b:false:false;this.shuffle=
b?b==="shuffle"?b:false:false;this.fn=c||null;return this.sortHelper},sortHelper:function(a,b){var c=g.Collection.stat,d=c.sort,e=d.shuffle?Math.round(Math.random()*2-1):d.rev?d.rev===true?-1:1:1;if(d.field){a=c.obj.getByLink(a,d.field);b=c.obj.getByLink(b,d.field)}if(d.fn){a=d.fn(a);b=d.fn(b)}if(d.shuffle)return e;else{if(a<b)return e*-1;if(a>b)return e;return 0}}};g.fn.collection=function(a){var b=g.fn.collection.stat,c=function(e){var f=[];e.each(function(h){var j=g(this),k=j.data(),m=j.attr("class")?
j.attr("class").split(" "):"",l=m?m.length:0,n;n=j[0];n=n.childNodes;for(var o=n.length-1,s=-1,r="";s++<o;)if(n[s].nodeType===3&&g.trim(n[s].textContent))r+=n[s].textContent;n=r?r:false;var p;f.push({});for(p in k)if(k.hasOwnProperty(p))f[h][p]=k[p];if(l){l--;f[h][b.classes]={};for(p=-1;p++<l;)f[h][b.classes][m[p]]=m[p]}if(j.children().length!==0)f[h][b.childNodes]=c(j.children());if(n!==false)f[h][b.val]=n.replace(/[\r\t\n]/g," ")});return f},d=c(this);if(a)return new g.Collection(d,a);return new g.Collection(d)};
if(!g.fn.collection.stat)g.fn.collection.stat={val:"val",childNodes:"childNodes",classes:"classes"};g.fn.tplCompile=function(){if(this.length===0)throw Error("DOM element isn't exist!");for(var a=this.eq(0).html().split("?>").join("<?js").replace(/[\r\t\n]/g," ").split("<?js"),b=a.length-1,c="result += ''",d="",e=-1,f,h;e++<b;)if(e===0||e%2===0)c+="+'"+a[e]+"'";else{f=-1;a[e]=a[e].split("<<");for(h=a[e].length;f++<h;)if(f===0||f%2===0)a[e][f]&&(d+=a[e][f]);else a[e][f]&&(c+="+"+a[e][f])}c+=";";return new Function("$this",
"i","aLength","$obj","id",'var result = "";'+d+c+" return result;")};g.isString=function(a){return Object.prototype.toString.call(a)==="[object String]"};g.isBoolean=function(a){return Object.prototype.toString.call(a)==="[object Boolean]"};g.isExist=function(a){return a!==undefined&&a!=="undefined"&&a!==null&&a!==""};g.unshiftArguments=function(a,b){for(var c=[b],d=0,e=a.length;d<e;d++)c.push(a[d]);return c};g.toUpperCase=function(a,b,c){c=c||0;if(!b)return a.toUpperCase();return a.substring(c,b).toUpperCase()+
a.substring(b)};g.toLowerCase=function(a,b,c){c=c||0;if(!b)return a.toLowerCase();return a.substring(c,b).toLowerCase()+a.substring(b)};g.Collection.stat.templateModels.simple=function(){var a;if(page===1&&countRecordsInPage===countRecords)g("."+pagePrev+",."+pageDisablePrev+",."+pageNext+",."+pageDisableNext,pager).addClass(pageDisableNext);else{if(countTotal===countRecords)g("."+pageNext,pager).replaceWith('<div class="'+pageDisableNext+'">'+aNext+"</div>");else{a=g("."+pageDisableNext,pager);a.length===
1?a.replaceWith('<a href="javascript:;" class="'+pageNext+'" data-action="set/page/next">'+aNext+"</a>"):g("."+pageNext,pager).removeClass(pageDisableNext)}if(page===1)g("."+pagePrev,pager).replaceWith('<div class="'+pageDisablePrev+'">'+aPrev+"</div>");else{a=g("."+pageDisablePrev,pager);a.length===1?a.replaceWith('<a href="javascript:;" class="'+pagePrev+'" data-action="set/page/prev">'+aPrev+"</a>"):g("."+pagePrev,pager).removeClass(pageDisableNext)}}countRecordsInPage===0?g("."+pageNumber,pager).html(0):
g("."+pageNumber,pager).html((page-1)*numberBreak+1+"-"+countTotal+" "+from+" "+countRecords);return true};g.Collection.stat.templateModels.control=function(a){a=a||{};var b=a.collection?a.collection.Count:"",c=this.dObj,d=c.sys,e=c.css,f=c.viewVal,h=c.prop;c=a.page||h.page;var j=a.calculator||h.calculator,k=g(a.pager||h.pager);b=a.countRecords||d.countRecords||b||0;var m=a.countRecordsInPage||d.countRecordsInPage||g(j,h.target).length;j=a.numberBreak||h.numberBreak;d=a.countTotal||d.countTotal||
j*c-(j-m);m=b%j!==0?~~(b/j)+1:b/j;var l="",n=e.pageActive,o=e.pagingLeft,s=e.pagingRight,r=e.pageDisablePrev;e=e.pageDisableNext;var p=f.aPrev,q=f.aNext,t=f.show;f=f.total;if(m>(a.pageBreak||h.pageBreak)){l+=c!==1?'<a href="javascript:;" data-action="set/page[1">'+p+"</a>":'<div class="'+r+'">'+p+"</div>";h=0;for(a=c-1;a++<m;h++){if(h===0&&c!==1)l+='<a href="javascript:;" data-action="set/page['+(a-1)+'">'+(a-1)+"</a>";if(h===j-1)break;l+=a===c?'<a href="javascript:;" class="'+n+'">'+a+"</a>":'<a href="javascript:;" data-action="set/page['+
a+'">'+a+"</a>"}l+=a!==m+1?'\t\t\t\t\t<a href="javascript:;" data-action="set/page['+(a+1)+'">'+(a+1)+'</a>\t\t\t\t\t<a href="javascript:;" data-action="set/page['+m+'">'+q+"</a>\t\t\t\t":'<div class="'+e+'">'+q+"</div>"}else for(a=0;a++<m;)l+=a===c?'<a href="javascript:;" class="'+n+'">'+a+"</a>":'<a href="javascript:;" data-action="set/page['+a+'">'+a+"</a>";if(b===0)g("."+o+",."+s,k).empty();else{g("."+s,k).html(l);g("."+o,k).html(f+": "+b+". "+t+": "+((c-1)*j+1)+"-"+d)}return true};g.Collection.storage=
{dObj:{prop:{collection:null,filter:false,context:"",cache:{autoIteration:false,iteration:false,firstIteration:-1,lastIteration:-1},index:null,map:null,variable:null,defer:"",page:1,parser:false,appendType:"html",target:null,calculator:".line",pager:"#pageControl",template:null,templateModel:g.Collection.stat.templateModels.simple,numberBreak:10,pageBreak:10,resultNull:false}}};g.Collection.storage.dObj.sys={callee:{callback:null,filter:null,parser:null,template:null,templateModel:null}};(function(a){var b,
c,d=g.Collection.storage.dObj.sys;for(b=a.length;b--;){c=g.toUpperCase(a[b],1);d["active"+c+"ID"]=null;d["tmp"+c]={};d[a[b]+"ChangeControl"]=null;d[a[b]+"Back"]=[]}})(g.Collection.fn.stack);g.Collection.storage.dObj.viewVal={aPrev:"&lt;&lt;",aNext:"&gt;&gt;",total:"total",show:"show",from:"from",noResultInSearch:"nothing was found"};g.Collection.storage.dObj.css={pageNumber:"pageNumber",pagePrev:"pagePrev",pageDisablePrev:"pageDisablePrev",pageNext:"pageNext",pageDisableNext:"pageDisableNext",pageActive:"pageActive",
pagingRight:"pagingRight",pagingLeft:"pagingLeft",noResult:"noResult"};g.Collection.fn._$=function(a,b){var c=this.dObj,d=g.toUpperCase(a,1);c.prop[a]=b;c.sys["active"+d+"ID"]=null;return this};g.Collection.fn._update=function(a,b){var c=this.dObj,d=c.prop;c=c.sys;var e=g.toUpperCase(a,1),f=c["active"+e+"ID"];d[a]=b;if(f)c["tmp"+e][f]=d[a];return this};g.Collection.fn._get=function(a,b){var c=this.dObj;if(b&&b!==this.config.constants.active)return c.sys["tmp"+g.toUpperCase(a,1)][b];return c.prop[a]};
g.Collection.fn._mod=function(a,b,c){var d=this.dObj,e=d.prop,f=d.sys,h=g.toUpperCase(a,1);d=f["tmp"+h];f=f["active"+h+"ID"];h=function(j,k){if(g.isNumeric(j)||g.isString(j))j+=k;else if(g.isArray(j))j.push(k);else if(g.isBoolean(j))j=k===true&&j===true?false:true;return j};if(c&&c!==this.config.constants.active){d[c]=h(d[c],b);if(f&&c===f)e[a]=d[c]}else{e[a]=h(e[a],b);if(f)d[f]=e[a]}return this};g.Collection.fn._push=function(a,b,c){var d=this.dObj.sys,e=g.toUpperCase(a,1),f=d["tmp"+e];d=d["active"+
e+"ID"];var h;if(g.isPlainObject(b))for(h in b){if(b.hasOwnProperty(h))if(h===this.config.constants.active)throw Error("invalid property name!");else if(f[h]&&d&&d===h)this._update(a,b[h]);else f[h]=b[h]}else if(b===this.config.constants.active)throw Error("invalid property name!");else if(f[b]&&d&&d===b)this._update(a,c);else f[b]=c;return this};g.Collection.fn._set=function(a,b){var c=this.dObj,d=c.sys,e=g.toUpperCase(a,1),f=a+"ChangeControl",h="active"+e+"ID";if(d[h]!==b){d[f]=true;d[h]=b}else d[f]=
false;d[a+"Back"].push(b);c.prop[a]=d["tmp"+e][b];return this};g.Collection.fn._back=function(a,b){var c=this.dObj,d=c.sys,e=g.toUpperCase(a,1),f=d[a+"Back"],h;d[a+"ChangeControl"]=false;h=f.length-(b||1)-1;if(h>=0&&f[h])if(d["tmp"+e][f[h]]){d["active"+e+"ID"]=f[h];c.prop[a]=d["tmp"+e][f[h]];f.splice(h+1,f.length)}return this};g.Collection.fn._backIf=function(a){if(this.dObj.sys[a+"ChangeControl"]===true)return this._back.apply(this,arguments);return this};g.Collection.fn._drop=function(a,b,c){c=
c===undefined?false:c;var d=this.dObj,e=d.prop;d=d.sys;var f=g.toUpperCase(a,1),h="active"+f+"ID";f="tmp"+f;var j=d[h];b=!b?j?[j]:[]:g.isArray(b)||g.isPlainObject(b)?b:[b];var k;if(b[0]&&b[0]!==this.config.constants.active)for(k in b){if(b.hasOwnProperty(k))if(!b[k]||b[k]===this.config.constants.active){j&&delete d[f][j];d[h]=null;e[a]=c}else{delete d[f][b[k]];if(j&&b[k]===j){d[h]=null;e[a]=c}}}else{j&&delete d[f][j];d[h]=null;e[a]=c}return this};g.Collection.fn._reset=function(a,b,c){c=c===undefined?
false:c;var d=this.dObj,e=d.prop;d=d.sys;var f=g.toUpperCase(a,1),h="tmp"+f;f=d["active"+f+"ID"];b=!b?f?[f]:[]:g.isArray(b)||g.isPlainObject(b)?b:[b];var j;if(b[0]&&b[0]!==this.config.constants.active)for(j in b){if(b.hasOwnProperty(j))if(!b[j]||b[j]===this.config.constants.active){if(f)d[h][f]=c;e[a]=c}else{d[h][b[j]]=c;if(f&&b[j]===f)e[a]=c}}else{if(f)d[h][f]=c;e[a]=c}return this};g.Collection.fn._resetTo=function(a,b,c){var d=this.dObj;c=!c||c===this.config.constants.active?d.prop[a]:d.sys["tmp"+
g.toUpperCase(a,1)][c];return this._reset(a,b||"",c)};g.Collection.fn._exist=function(a,b){var c=this.dObj,d=g.toUpperCase(a,1);if((!b||b===this.config.constants.active)&&c.sys["active"+d+"ID"])return true;if(c.sys["tmp"+d][b]!==undefined)return true;return false};g.Collection.fn._is=function(a,b){if(b===this.dObj.sys["active"+g.toUpperCase(a,1)+"ID"])return true;return false};g.Collection.fn.use=function(a){this._exist("collection",a)&&this._set("collection",a);this._exist("filter",a)&&this._set("filter",
a);this._exist("context",a)&&this._set("context",a);this._exist("cache",a)&&this._set("cache",a);this._exist("index",a)&&this._set("index",a);this._exist("map",a)&&this._set("map",a);this._exist("var",a)&&this._set("var",a);this._exist("defer",a)&&this._set("defer",a);this._exist("page",a)&&this._set("page",a);this._exist("parser",a)&&this._set("parser",a);this._exist("appendType",a)&&this._set("appendType",a);this._exist("target",a)&&this._set("target",a);this._exist("calculator",a)&&this._set("calculator",
a);this._exist("pager",a)&&this._set("pager",a);this._exist("template",a)&&this._set("template",a);this._exist("templateModel",a)&&this._set("templateModel",a);this._exist("numberBreak",a)&&this._set("numberBreak",a);this._exist("pageBreak",a)&&this._set("pageBreak",a);this._exist("resultNull",a)&&this._set("resultNull",a);return this};g.Collection.fn._prop=function(a,b,c){var d=this.dObj[a];if(arguments.length!==3)if(g.isPlainObject(b))g.extend(d,b);else return d[b];else d[b]=c;return this};g.Collection.fn.prop=
function(){return this._prop.apply(this,g.unshiftArguments(arguments,"prop"))};g.Collection.fn.css=function(){return this._prop.apply(this,g.unshiftArguments(arguments,"css"))};g.Collection.fn.viewVal=function(){return this._prop.apply(this,g.unshiftArguments(arguments,"viewVal"))};(function(a){var b,c=g.Collection.fn,d;for(b=a.length;b--;){d=a[b]!=="collection"?g.toUpperCase(a[b],1):"";c["$"+d]=function(e){return function(f){return this._$(e,f)}}(a[b]);if(a[b]==="context")c["mod"+d]=function(e){return function(){return this._mod.apply(this,
g.unshiftArguments(arguments,e))}}(a[b]);c["update"+d]=function(e){return function(f){return this._update(e,f)}}(a[b]);c["reset"+d+"To"]=function(e){return function(f,h){return this._resetTo(e,f,h)}}(a[b]);c["push"+d]=function(e){return function(){return this._push.apply(this,g.unshiftArguments(arguments,e))}}(a[b]);c["set"+d]=function(e){return function(f){return this._set(e,f)}}(a[b]);c["pushSet"+d]=function(e){return function(f,h){return this._push(e,f,h)._set(e,f)}}(a[b]);c["back"+d]=function(e){return function(f){return this._back(e,
f||"")}}(a[b]);c["back"+d+"If"]=function(e){return function(f){return this._backIf(e,f||"")}}(a[b]);c["drop"+d]=a[b]==="filter"||a[b]==="parser"?function(e){return function(){return this._drop(e,arguments)}}(a[b]):function(e){return function(){return this._drop(e,arguments,null)}}(a[b]);if(a[b]==="filter"||a[b]==="parser")c["reset"+d]=function(e){return function(){return this._reset(e,arguments)}}(a[b]);else if(a[b]==="page")c["reset"+d]=function(e){return function(){return this._reset(e,arguments,
1)}}(a[b]);else if(a[b]==="context")c["reset"+d]=function(e){return function(){return this._reset(e,arguments,"")}}(a[b]);c["is"+d]=function(e){return function(f){return this._is(e,f)}}(a[b]);c["exist"+d]=function(e){return function(f){return this._exist(e,f||"")}}(a[b]);c["get"+d]=function(e){return function(f){return this._get(e,f||"")}}(a[b])}})(g.Collection.fn.stack);g.Collection.fn.setElement=function(a,b,c){a=g.isExist(a)?a.toString():"";b=b===undefined?"":b;var d=this.config.constants,e=this.dObj,
f=this.getActiveContext();if(!a&&!f)return c&&c!==d.active?this._push("collection",c,b):this._update("collection",b);g.Collection.stat.obj.setByLink(c&&c!==d.active?e.sys.tmpCollection[c]:e.prop.collection,f+d.contextSeparator+a,b);return this};g.Collection.fn.getElement=function(a,b){a=g.isExist(a)?a.toString():"";var c=this.config.constants,d=this.dObj;return g.Collection.stat.obj.getByLink(b&&b!==c.active?d.sys.tmpCollection[b]:d.prop.collection,this.getActiveContext()+c.contextSeparator+a)};g.Collection.fn.addElement=
function(a,b,c,d,e){a=a!==undefined?a:"";b=b||"push";e=e===true?true:false;var f=this.config.constants,h=g.Collection.stat.obj,j=this.dObj,k=j.prop,m=j.sys,l;j=h.getByLink(c&&c!==f.active?m.tmpCollection[c]:k.collection,this.getActiveContext());if(typeof j==="object"){l=g.isPlainObject(j);if(d){a=g.isExist(a)?a.toString():"";k=h.getByLink(d===f.active?k.collection:m.tmpCollection[d],a);if(l===true){b=b==="push"?this.length(j):b==="unshift"?this.length(j)+f.methodSeparator+"unshift":b;f=h.addElementToObject(j,
b.toString(),k)}else{f=true;if(b==="push")j.push(k);else b==="unshift"&&j.unshift(k)}if(e===true){this.config.flags.use.ac=false;this.deleteElementByLink(a,d);this.config.flags.use.ac=true}}else if(l===true){b=b==="push"?this.length(j):b==="unshift"?this.length(j)+f.methodSeparator+"unshift":b;f=h.addElementToObject(j,b.toString(),a)}else{f=true;if(b==="push")j.push(a);else b==="unshift"&&j.unshift(a)}if(f!==true)this.setElement("",f,c||"")}else throw Error("unable to set property!");return this};
g.Collection.fn.deleteElementByLink=function(a,b){a=g.isExist(a)?a.toString():"";var c=this.config.constants,d=this.dObj,e=d.prop,f,h=0;h=0;h=this.getActiveContext();if(!a&&!h)this.setElement("",null);else{a=(h+c.contextSeparator+a).split(c.contextSeparator);for(h=a.length;h--;){a[h]=g.trim(a[h]);if(a[h]===""||a[h]===c.subcontextSeparator)a.splice(h,1)}a=a.join(c.contextSeparator);d=g.Collection.stat.obj.getByLink(b&&b!==c.active?d.sys.tmpCollection[b]:e.collection,a.replace(RegExp("[^"+c.contextSeparator+
"]+$"),""));a=a.replace(RegExp(".*?([^"+c.contextSeparator+"]+$)"),"$1");if(g.isArray(d)){a=+a.replace(c.subcontextSeparator,"");a>=0?d.splice(a,1):d.splice(d.length+a,1)}else if(a.search(c.subcontextSeparator)===-1)delete d[a];else{c=+a.replace(c.subcontextSeparator,"");if(c<0){e=0;for(f in d)d.hasOwnProperty(f)&&e++;c+=e}h=0;for(f in d)if(d.hasOwnProperty(f)){if(c===h){delete d[f];break}h++}}}return this};g.Collection.fn.deleteElementsByLink=function(a,b){var c,d;if(g.isPlainObject(a))for(c in a){if(a.hasOwnProperty(c))if(g.isArray(a[c]))for(d=
a[c].length;d--;)this.deleteElementByLink(a[c][d],c);else this.deleteElementByLink(a[c],c)}else if(g.isArray(a))for(d=a.length;d--;)this.deleteElementByLink(a[d],b||"");else this.deleteElementByLink(a,b||"");return this};g.Collection.fn.concat=function(a,b,c){b=g.isExist(b)?b.toString():"";var d=this.config.constants,e=this.dObj;d=g.Collection.stat.obj.getByLink(c&&c!==d.active?e.sys.tmpCollection[c]:e.prop.collection,this.getActiveContext()+d.contextSeparator+b);if(typeof d==="object")if(g.isPlainObject(d))g.extend(true,
d,a);else{if(g.isArray(d))if(g.isArray(a)){d=Array.prototype.concat(d,a);this.setElement(b,d,c||"")}else this.addElement(a,"push",c||"")}else throw Error("incorrect data type!");return this};g.Collection.fn.length=function(a,b){a=g.isExist(a)?a:false;var c=this.dObj,d,e,f;if(!g.isFunction(a))if(g.isString(a)&&!g.isExist(b)||g.isArray(a)||g.isPlainObject(a)){b=a;a=false}if(!b||b===this.config.constants.active)c=c.prop.collection;else if(g.isString(b))c=c.sys.tmpCollection[b];else{d=true;c=b}if(d!==
true)c=g.Collection.stat.obj.getByLink(c,this.getActiveContext());if(c===null)return 0;d=c.length;if(g.isString(c))return d;if(typeof c==="object")if(a===false&&d!==undefined)f=d;else{f=0;for(e in c)if(c.hasOwnProperty(e))if(a===false||this.customFilter(a,c,e,d||null,this,b?b:this.config.constants.active)===true)f++}else throw Error("incorrect data type!");return f};g.Collection.fn.each=function(a,b,c,d,e,f,h){b=b||false;c=g.isExist(c)?c:this.config.constants.active;if(g.isBoolean(c)){h=f;f=e;e=d;
d=c;c=this.config.constants.active}d=d===false?false:true;e=parseInt(e)>=0?parseInt(e):false;f=parseInt(f)||false;h=parseInt(h)||false;var j=this.dObj,k=j.prop,m=j.sys,l,n=0;j.sys.callee.callback=a;j=g.Collection.stat.obj.getByLink(c!==this.config.constants.active?m.tmpCollection[c]:k.collection,this.getActiveContext());k=this.length(j);if(g.isArray(j)){m=k-1;for(l=h!==false?h-1:-1;l++<m;){if(e!==false&&n===e)break;if(b===false||this.customFilter(b,j,l,k,this,c)===true)if(f!==false&&f!==0)f--;else{if(a.call(this,
j,l,k,this,c)===false)break;if(d===false)break;n++}}}else for(l in j)if(j.hasOwnProperty(l)){if(e!==false&&n===e)break;if(h!==false&&h!==0)h--;else if(b===false||this.customFilter(b,j,l,k,this,c)===true)if(f!==false&&f!==0)f--;else{if(a.call(this,j,l,k,this,c)===false)break;if(d===false)break;n++}}return this};g.Collection.fn.searchElements=function(a,b,c,d,e,f){a=a||false;b=g.isExist(b)?b:this.config.constants.active;if(g.isBoolean(b)){f=e;e=d;d=c;c=b;b=this.config.constants.active}c=c===false?false:
true;d=parseInt(d)>=0?parseInt(d):false;e=parseInt(e)||false;f=parseInt(f)||false;var h=[];this.each(function(j,k){if(c===true)h.push(k);else{h=k;return false}return true},a,b,c,d,e,f);return h};g.Collection.fn.searchElement=function(a,b){return this.searchElements(a||"",b||"",false)};g.Collection.fn.returnElements=function(a,b,c,d,e,f){a=a||false;b=g.isExist(b)?b:this.config.constants.active;if(g.isBoolean(b)){f=e;e=d;d=c;c=b;b=this.config.constants.active}c=c===false?false:true;d=parseInt(d)>=0?
parseInt(d):false;e=parseInt(e)||false;f=parseInt(f)||false;var h=[];this.each(function(j,k){if(c===true)h.push(j[k]);else{h=j[k];return false}return true},a,b,c,d,e,f);return h};g.Collection.fn.returnElement=function(a,b){return this.returnElements(a||"",b||"",false)};g.Collection.fn.replaceElements=function(a,b,c,d,e,f,h){a=a||false;c=g.isExist(c)?c:this.config.constants.active;if(g.isBoolean(c)){h=f;f=e;e=d;d=c;c=this.config.constants.active}d=d===false?false:true;e=parseInt(e)>=0?parseInt(e):
false;f=parseInt(f)||false;h=parseInt(h)||false;var j=g.isFunction(b);this.each(function(k,m,l,n,o){if(j)b(k,m,l,n,o);else k[m]=b;return true},a,c,d,e,f,h);return this};g.Collection.fn.replaceElement=function(a,b,c){return this.replaceElements(a||"",b,c||"",false)};g.Collection.fn.moveElements=function(a,b,c,d,e,f,h,j,k,m){a=a||false;m=m===false?false:true;b=g.isExist(b)?b.toString():"";c=c||"";d=d||"";e=e||"push";f=f===false?false:true;h=parseInt(h)>=0?parseInt(h):false;j=parseInt(j)||false;k=parseInt(k)||
false;var l=this.config.constants,n=[],o=g.isArray(g.Collection.stat.obj.getByLink(this._get("collection",d),this.getActiveContext())),s=-1;this.config.flags.use.ac=false;a=this.searchElements(a,c,f,h,j,k);this.config.flags.use.ac=true;if(f===true)for(f=a.length-1;s++<f;){this.addElement(b+l.contextSeparator+a[s],o===true?e:a[s]+l.methodSeparator+e,d,c);m===true&&n.push(a[s])}else{this.addElement(b+l.contextSeparator+a,o===true?e:a+l.methodSeparator+e,d,c);m===true&&n.push(a)}if(m===true){this.config.flags.use.ac=
false;this.deleteElementsByLink(n,c);this.config.flags.use.ac=true}return this};g.Collection.fn.moveElement=function(a,b,c,d,e){return this.moveElements(a||"",g.isExist(b)?b.toString():"",c||"",d||"",e||"",false)};g.Collection.fn.copyElements=function(a,b,c,d,e,f,h,j,k){f=f===false?false:true;h=parseInt(h)>=0?parseInt(h):false;j=parseInt(j)||false;k=parseInt(k)||false;return this.moveElements(a||"",g.isExist(b)?b.toString():"",c||"",d||"",e||"push",f,h,j,k,false)};g.Collection.fn.copyElement=function(a,
b,c,d,e){return this.moveElements(a||"",g.isExist(b)?b.toString():"",c||"",d||"",e||"",false,"","","",false)};g.Collection.fn.deleteElements=function(a,b,c,d,e,f){a=a||false;b=g.isExist(b)?b:this.config.constants.active;if(g.isBoolean(b)){f=e;e=d;d=c;c=b;b=this.config.constants.active}c=c===false?false:true;d=parseInt(d)>=0?parseInt(d):false;e=parseInt(e)||false;f=parseInt(f)||false;a=this.searchElements(a,b,c,d,e,f);if(c===false)this.deleteElementByLink(a,b);else for(c=a.length;c--;)this.deleteElementByLink(a[c],
b);return this};g.Collection.fn.deleteElement=function(a,b){return this.deleteElements(a||"",b||"",false)};g.Collection.fn.customFilter=function(a,b,c,d,e,f){var h,j=this.dObj,k=j.prop;j=j.sys;var m,l,n=true,o,s,r,p=-1;if(g.isFunction(a)){j.callee.filter=a;return a(b,c,d,e,f)}if(!a||g.isString(a)&&g.trim(a)===this.config.constants.active){if(k.filter){j.callee.filter=k.filter;return k.filter(b,c,d,e,f)}return true}else{if(!g.isArray(a)){if(a.search(/\|\||&&|!|\(|\)/)===-1){j.callee.filter=j.tmpFilter[a];
return j.tmpFilter[a](b,c,d,e,f)}a=g.trim(a.toString().replace(/\s*(\(|\))\s*/g," $1 ").replace(/\s*(\|\||&&)\s*/g," $1 ").replace(/(!)\s*/g,"$1")).split(" ")}l=function(q,t){for(var u=-1,x=q.length-1,v=0,w=[];u++<x;){t++;q[u]==="("&&v++;if(q[u]===")")if(v===0)return{result:w,iter:t};else v--;w.push(q[u])}};for(m=a.length-1;p++<m;)if(a[p]==="("||a[p]==="!("){if(a[p].substring(0,1)==="!"){r=true;a[p]=a[p].substring(1)}else r=false;h=l(a.slice(p+1),p);p=h.iter;h=this.customFilter(h.result,b,c,d,e,f);
n=!o&&!s?r===true?!h:h:o?r===true?!h:h&&n:r===true?!h:h||n}else if(a[p]!==")"&&a[p]!=="||"&&a[p]!=="&&"){console.log(a[p]);if(a[p].substring(0,1)==="!"){r=true;a[p]=a[p].substring(1)}else r=false;h=a[p]===this.config.constants.active?k.filter:j.tmpFilter[a[p]];j.callee.filter=h;h=h(b,c,d,e,f);n=!o&&!s?r===true?!h:h:o?r===true?!h:h&&n:r===true?!h:h||n}else if(a[p]==="||"){o=false;s=true}else if(a[p]==="&&"){s=false;o=true}return n}};g.Collection.fn.customParser=function(a,b){var c=this.dObj,d=c.prop;
c=c.sys;var e,f;if(g.isFunction(a)){c.callee.parser=a;return a(b,this)}if(!a||g.isString(a)&&g.trim(a)===this.config.constants.active){if(d.parser){c.callee.parser=d.parser;return d.parser(b,this)}}else{if(g.isString(a)){a=g.trim(a);if(a.search("&&")===-1){c.callee.parser=c.tmpParser[a];return c.tmpParser[a](b,this)}a=a.split("&&")}for(f=a.length;f--;){a[f]=g.trim(a[f]);e=a[f]===this.config.constants.active?d.parser:c.tmpParser[a[f]];c.callee.parser=e;b=e(b,this)}}return b};g.Collection.fn.parentContext=
function(a,b){a=a||1;var c=this.dObj,d=c.sys,e=c.prop;c="";c=(b&&b!==this.config.constants.active?d.tmpContext[b]:e.context).split(g.Collection.stat.obj.contextSeparator);for(d=a;d--;)c.splice(-1,1);return c.join(g.Collection.stat.obj.contextSeparator)};g.Collection.fn.parent=function(a,b){var c=this.dObj,d=c.sys;c=c.prop;var e=d.contextID,f=this.parentContext.apply(this,arguments);if(!b||b===this.config.constants.active){if(e)d.tmpContext[e]=f;c.context=f}else{d.tmpContext[b]=f;if(e&&b===e)c.context=
f}return this};g.Collection.fn.orderBy=function(a,b,c,d){a=a||null;b=b||false;c=c?c===false?null:c:function(m){if(isNaN(m))return m.toUpperCase();return m};d=d||"";var e=g.Collection.stat,f=this.dObj,h=f.sys,j=function(m){var l=[],n={},o;for(o in m)m.hasOwnProperty(o)&&l.push(o);l.sort(e.sort.sortBy(a,b,c));for(o in l)if(l.hasOwnProperty(o))n[l[o]]=m[l[o]];return n},k=function(m){var l=[],n={},o;for(o in m)m.hasOwnProperty(o)&&l.push({key:o,value:m[o]});l.sort(e.sort.sortBy(a===true?"value":"value"+
e.obj.contextSeparator+a,b,c));for(o in l)if(l.hasOwnProperty(o))n[l[o].key]=l[o].value;return n};f=e.obj.getByLink(d?h.tmpCollection[d]:f.prop.collection,this.getActiveContext());if(typeof f==="object")if(g.isArray(f))f.sort(e.sort.sortBy(a,b,c));else{f=a?k.call(this,f):j.call(this,f);this.setElement("",f,d||"")}else throw Error("incorrect data type!");return this};g.Collection.fn.toString=function(a,b,c){var d=this.dObj;a=a&&a!==this.config.constants.active?d.sys.tmpCollection[a]:d.prop.collection;
a=g.Collection.stat.obj.getByLink(a,this.getActiveContext());if(JSON&&JSON.stringify)return JSON.stringify(a,b||"",c||"");throw Error("object JSON is not defined!");};g.Collection.fn.valueOf=function(a){return this.length(g.isExist(a)?a:this.config.constants.active)};g.Collection.fn.then=function(a,b){var c=this;arguments.length===1?g.when(c.prop("defer")).always(function(){a.apply(c,arguments)}):g.when(c.prop("defer")).then(function(){a().apply(c,arguments)},function(){b().apply(c,arguments)});return this};
g.Collection.fn.print=function(a,b,c,d,e){a=a||{};b=b===false?false:true;c=parseInt(c)>=0?parseInt(c):false;d=parseInt(d)||false;e=parseInt(e)||false;var f=this.dObj,h=f.prop,j=a.parser||h.parser,k=a.template||h.template,m=a.target||a.target===false?a.target:h.target,l=a.resultNull!==undefined?a.resultNull:h.resultNull,n="";f.sys.callee.template=k;this.each(function(o,s,r,p,q){n+=k(o,s,r,p,q);if(b!==true)return false;return true},a.filter||h.filter,this.config.constants.active,b,c,d,e);n=!n?l===false?
'<div class="'+f.css.noResult+'">'+f.viewVal.noResultInSearch+"</div>":l:n;n=j!==false?this.customParser(j,n):n;if(m===false)a.variable?this._push("variable",a.variable,n):this.$_("variable",n);else m[a.appendType||h.appendType](n);return this};g.Collection.fn.extPrint=function(a){a=a||{};var b=this.dObj,c=b.sys,d=b.prop,e,f,h,j=0,k,m,l="",n;a.filter=a.filter||d.filter;a.parser=a.parser||d.parser;a.page=a.page||d.page;k=a.page===a.page+1;a.template=a.template||d.template;a.target=a.target||d.target;
a.numberBreak=+a.numberBreak||+d.param.numberBreak;a.pageBreak=+a.pageBreak||+d.param.pagerBreak;m=d.cache;a.cacheIteration=g.isBoolean(a.cacheIteration)?a.cacheIteration:m.iteration;a.resultNull=a.resultNull!==undefined?a.resultNull:d.resultNull;l="";n=function(o,s,r,p,q){l+=template(o,s,r,p,q);j=s;return true};e=g.Collection.stat.obj.getByLink(d.collection,a.context||this.getActiveContext());f=this.length();a.numberBreak=a.numberBreak===false?f:a.numberBreak;c.callee.template=a.template;if(g.isPlainObject(e)||
a.cacheIteration===false){h=a.page===1?a.numberBreak:(a.page-1)*a.numberBreak;this.each(n,a.filter,this.config.constants.active,true,a.numberBreak,h)}else if(g.isArray(e)&&cacheIteration===true){h=a.filter===false?a.page===1?-1:(a.page-1)*a.numberBreak-1:cacheIteration===true?k===true?m.firstIteration:m.lastIteration:i;if(k===true&&a.filter!==false){for(;h--;)if(this.customFilter(a.filter,e,h,f,$this,this.config.constants.active)===true)if(j===a.numberBreak)break;else j++;h=h===-1?h:h+1;m.lastIteration=
h}this.each(n,a.filter,this.config.constants.active,true,a.numberBreak,null,h);m.firstIteration=m.lastIteration;m.lastIteration=j-1;if(m.autoIteration===true)m.iteration=true}l=!l?resultNull===false?'<div class="'+b.css.noResult+'">'+b.viewVal.noResultInSearch+"</div>":resultNull:l;l=parser!==false?this.customParser(parser,l):l;target[a.appendType||d.appendType](l);g.extend(a,{countRecords:this.length(a.filter),countRecordsInPage:g(a.calculator||d.calculator,target).length,countTotal:a.numberBreak*
a.page-(a.numberBreak-c.countRecordsInPage)});return this};g.Collection.fn.easyPage=function(){this.dObj.sys.callee.templateModel=this.dObj.prop.templateModel;this.dObj.prop.templateModel.apply(this,arguments);return this};g.Collection.fn.genTable=function(a){a=a||4;var b=1,c,d=this.dObj.prop.target,e=d.children("td").length-1,f=a-1,h="";d.children("td").each(function(j){if(b===a){h="";for(c=-1;c++<f;){h+="td:eq("+(j-c)+")";if(c!==f)h+=","}g(h,d).wrapAll("<tr></tr>");b=0}else if(j===e&&b!==a){h="";
for(c=0;c<b;c++){h+="td:eq("+c+")";if(c!==b-1)h+=","}d.children(h).wrapAll("<tr></tr>");for(h="";b<a;b++)h+="<td></td>";d.children("tr:last").append(h)}b++});d.children("tr").wrapAll("<table></table>");return this};g.Collection.fn.genIndex=function(){console.log({})};g.Collection.fn.genMap=function(a,b){var c=this.dObj.sys.collectionID;if(!((!a||a===this.config.constants.active||!b||b===this.config.constants.active)&&c))if(!c)throw Error("Invalid ID collection");console.log({})}})(jQuery);
JSON||(JSON={});
(function(){function g(k){return k<10?"0"+k:k}function a(k){d.lastIndex=0;return d.test(k)?'"'+k.replace(d,function(m){var l=h[m];return typeof l==="string"?l:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+k+'"'}function b(k,m){var l,n,o,s,r=e,p,q=m[k];q&&typeof q==="object"&&typeof q.toJSON==="function"&&(q=q.toJSON(k));typeof j==="function"&&(q=j.call(m,k,q));switch(typeof q){case "string":return a(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";
e+=f;p=[];if(Object.prototype.toString.apply(q)==="[object Array]"){s=q.length;for(l=0;l<s;l+=1)p[l]=b(l,q)||"null";o=p.length===0?"[]":e?"[\n"+e+p.join(",\n"+e)+"\n"+r+"]":"["+p.join(",")+"]";e=r;return o}if(j&&typeof j==="object"){s=j.length;for(l=0;l<s;l+=1)typeof j[l]==="string"&&(n=j[l],(o=b(n,q))&&p.push(a(n)+(e?": ":":")+o))}else for(n in q)Object.prototype.hasOwnProperty.call(q,n)&&(o=b(n,q))&&p.push(a(n)+(e?": ":":")+o);o=p.length===0?"{}":e?"{\n"+e+p.join(",\n"+e)+"\n"+r+"}":"{"+p.join(",")+
"}";e=r;return o}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,f,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(k,m,l){var n;f=e="";if(typeof l==="number")for(n=0;n<l;n+=1)f+=" ";else typeof l==="string"&&(f=l);if((j=m)&&typeof m!=="function"&&(typeof m!=="object"||typeof m.length!=="number"))throw Error("JSON.stringify");return b("",
{"":k})};if(typeof JSON.parse!=="function")JSON.parse=function(k,m){function l(o,s){var r,p,q=o[s];if(q&&typeof q==="object")for(r in q)Object.prototype.hasOwnProperty.call(q,r)&&(p=l(q,r),p!==void 0?q[r]=p:delete q[r]);return m.call(o,s,q)}var n;k=String(k);c.lastIndex=0;c.test(k)&&(k=k.replace(c,function(o){return"\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(k.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return n=eval("("+k+")"),typeof m==="function"?l({"":n},""):n;throw new SyntaxError("JSON.parse");}})();
//