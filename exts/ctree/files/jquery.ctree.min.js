/**
 * cTree
 * 
 * autor: kobezzza (kobezzza@gmail.com | http://kobezzza.com)
 * version: 1.6
 * date: 27.10.2011 14:39:15
 */
 (function(g){g.fn.cTree=function(b,a){var e,d;if(this.data("CUI")&&this.data("CUI").cTree){d=this.data("CUI").cTree.obj;if(b&&b===true){d.existTemplate("cTree_standartTpl")||d.pushTemplate("cTree_standartTpl",g.fn.cTree.template);d.prop("activeTarget",this).setTemplate("cTree_standartTpl").print()}return d}b=b&&b!==true?b:{};b.def=b.def||"";d=a&&a.name&&a.name==="$.Collection"?a:a&&a!==false?new g.Collection(a,b.def):a&&a===false?new g.Collection("",b.def):this.collection(b.def);d.prop("activeTarget",
this).pushSetTemplate("cTree_standartTpl",g.fn.cTree.template);if(!a||a!==false)d.print();this.setCUI("cTree",d);for(e in b)if(b.hasOwnProperty(e)&&e!=="def")this.data("CUI").cTree.events[e]=b[e];for(e in g.fn.cTree.events)if(g.fn.cTree.events.hasOwnProperty(e)&&e!=="animate")g.fn.cTree.events[e](this,d);return d};if(!g.fn.cTree.stat)g.fn.cTree.stat={val:"val",childNodes:"childNodes",doctype:"doctype",href:"href",html:"html",ico:"ico",alt:"alt",eopen:"eopen"};g.fn.cTree.template=function(b,a,e,d,
f,h,i){var c=g.fn.cTree.stat,j="";e-=1;var k,l=-1;if(a===0)j='<ul class="cTree_container">';if(!h&&b[a].context){h=b[a].context;i=a}k=b[a][c.childNodes]&&g.isArray(b[a][c.childNodes]);j+="\t\t<li"+(h?' data-context="'+h+'"':' data-context=""')+(h?' data-pos="'+i+'"':' data-pos="'+a+'"')+' class="cTree_node'+(!h?" cTree_isRoot":"")+(k?b[a][c.childNodes].length===0?" cTree_emptyChildNodes":"":" cTree_expandLeaf")+(a===e?" cTree_isLast":"")+(b[a][c.eopen]?" cTree_expandOpen":" cTree_expandClosed")+'">\t\t\t<div class="cTree_expand"></div>\t\t\t<div class="cTree_content">'+
(b[a][c.html]?b[a][c.html]:"")+(b[a][c.ico]?'<img src="'+b[a][c.ico]+'" alt="'+(b[a][c.alt]?b[a][c.alt]:"")+'"'+(!b[a][c.doctype]||b[a][c.doctype]=="xhtml"?" /":"")+">":"")+(b[a][c.href]&&b[a][c.val]?'<a href="'+b[a][c.href]+'">'+b[a][c.val]+"</a>":b[a][c.val]?"<span>"+b[a][c.val]+"</span>":"")+"</div>\t\t";if(k){i=b[a][c.childNodes].length;k=i-1;for(h=h?h+"~"+a+"~"+c.childNodes:a+"~"+c.childNodes;l++<k;)j+=g.fn.cTree.template(b[a][c.childNodes],l,i,d,f,h,l)}j+="</li>";if(a===e)j+="</ul>";return j};
g.fn.cTree.events={};g.fn.cTree.events.standart=function(b,a){b.delegate(".cTree_expand","click",function(e){var d=g(e.target).parent(),f=b.data("CUI").cTree.events,h,i=d.data("context"),c=d.data("pos");if(!d.hasClass("cTree_expandLeaf")){if(d.hasClass("cTree_expandOpen")){if(!f.animate||!f.animate.close)d.removeClass("cTree_expandOpen").addClass("cTree_expandClosed");else f.animate&&f.animate.close&&f.animate.close.call(d);f.close&&f.close.call(a,e,i,c,d);h="close"}else{if(!f.animate||!f.animate.open)d.removeClass("cTree_expandClosed").addClass("cTree_expandOpen");
else f.animate&&f.animate.open&&f.animate.open.call(d);f.open&&f.open.call(a,e,i,c,d);h="open"}f.click&&f.click.call(a,e,i,c,d,h)}});return this}})(jQuery);
//