/**
 * cTree
 * 
 * autor: kobezzza (kobezzza@gmail.com | http://kobezzza.com)
 * version: 1.6
 * date: 27.10.2011 14:39:15
 */
 (function(e){e.fn.cTree=function(b,a){var f,c;if(this.data("CUI")&&this.data("CUI").cTree){c=this.data("CUI").cTree.obj;if(b&&b===true){c.existTemplate("cTree_standartTpl")||c.pushTemplate("cTree_standartTpl",e.fn.cTree.template);c.prop("activeTarget",this).setTemplate("cTree_standartTpl").print()}return c}b=b&&b!==true?b:{};b.def=b.def||"";c=a&&a.name&&a.name==="$.Collection"?a:a&&a!==false?new e.Collection(a,b.def):a&&a===false?new e.Collection("",b.def):this.collection(b.def);c.prop("activeTarget",
this).pushSetTemplate("cTree_standartTpl",e.fn.cTree.template);if(!a||a!==false)c.print();this.setCUI("cTree",c);for(f in b)if(b.hasOwnProperty(f)&&f!=="def")this.data("CUI").cTree.events[f]=b[f];for(f in e.fn.cTree.events)if(e.fn.cTree.events.hasOwnProperty(f)&&f!=="animate")e.fn.cTree.events[f](this,c);return c};if(!e.fn.cTree.stat)e.fn.cTree.stat={val:"val",childNodes:"childNodes",doctype:"doctype",href:"href",html:"html",ico:"ico",alt:"alt",eopen:"eopen"};e.fn.cTree.template=function(b,a,f,c,
g,h,i){var d=e.fn.cTree.stat,j="";f-=1;var k,l=-1;if(a===0)j='<ul class="cTree_container">';if(!h&&b[a].context){h=b[a].context;i=a}k=b[a][d.childNodes]&&e.isArray(b[a][d.childNodes]);j+="\t\t<li"+(h?' data-context="'+h+'"':' data-context=""')+(h?' data-pos="'+i+'"':' data-pos="'+a+'"')+' class="cTree_node'+(!h?" cTree_isRoot":"")+(k?b[a][d.childNodes].length===0?" cTree_emptyChildNodes":"":" cTree_expandLeaf")+(a===f?" cTree_isLast":"")+(b[a][d.eopen]?" cTree_expandOpen":" cTree_expandClosed")+'">\t\t\t<div class="cTree_expand"></div>\t\t\t<div class="cTree_content">'+
(b[a][d.html]?b[a][d.html]:"")+(b[a][d.ico]?'<img src="'+b[a][d.ico]+'" alt="'+(b[a][d.alt]?b[a][d.alt]:"")+'"'+(!b[a][d.doctype]||b[a][d.doctype]=="xhtml"?" /":"")+">":"")+(b[a][d.href]&&b[a][d.val]?'<a href="'+b[a][d.href]+'">'+b[a][d.val]+"</a>":b[a][d.val]?"<span>"+b[a][d.val]+"</span>":"")+"</div>\t\t";if(k){i=b[a][d.childNodes].length;k=i-1;for(h=h?h+"~"+a+"~"+d.childNodes:a+"~"+d.childNodes;l++<k;)j+=e.fn.cTree.template(b[a][d.childNodes],l,i,c,g,h,l)}j+="</li>";if(a===f)j+="</ul>";return j};
e.fn.cTree.events={};e.fn.cTree.events.standart=function(b,a){b.delegate(".cTree_expand","click",function(f){var c=e(f.target).parent(),g=b.data("CUI").cTree.events,h,i=c.data("context"),d=c.data("pos");if(!c.hasClass("cTree_expandLeaf")){if(c.hasClass("cTree_expandOpen")){if(!g.animate||!g.animate.close)c.removeClass("cTree_expandOpen").addClass("cTree_expandClosed");else g.animate&&g.animate.close&&g.animate.close.call(c).queue(function(){c.removeClass("cTree_expandOpen").addClass("cTree_expandClosed");
e(this).removeAttr("style").dequeue()});g.close&&g.close.call(a,f,i,d,c);h="close"}else{if(!g.animate||!g.animate.open)c.removeClass("cTree_expandClosed").addClass("cTree_expandOpen");else g.animate&&g.animate.open&&g.animate.open.call(c).queue(function(){c.removeClass("cTree_expandClosed").addClass("cTree_expandOpen");e(this).removeAttr("style").dequeue()});g.open&&g.open.call(a,f,i,d,c);h="open"}g.click&&g.click.call(a,f,i,d,c,h)}});return this}})(jQuery);
//